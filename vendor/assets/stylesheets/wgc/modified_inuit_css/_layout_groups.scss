$wgc-layout-sizes: (
  $wgc-enable-layout--flush                     "--flush"                     0,
  $wgc-enable-layout--gutter-one-quarter-bsu    "--gutter-one-quarter-bsu"    quarter($wgc-bsu),
  $wgc-enable-layout--gutter-one-half-bsu       "--gutter-one-half-bsu"       halve($wgc-bsu),
  $wgc-enable-layout--gutter-one-bsu            "--gutter-one-bsu"            $wgc-bsu,
  $wgc-enable-layout--gutter-two-bsu            "--gutter-two-bsu"            double($wgc-bsu),
  $wgc-enable-layout--gutter-four-bsu           "--gutter-four-bsu"           quadruple($wgc-bsu)
) !default;

@mixin wgc-layout-group($modifier, $modifier-value, $wgc-breakpoint) {
  .#{$wgc-namespace}__#{$wgc-breakpoint}layout-group#{$modifier},
  %#{$wgc-namespace}__#{$wgc-breakpoint}layout-group#{$modifier} {
    list-style: none;
    margin: 0;
    padding: 0;

    > .#{$wgc-namespace}__#{$wgc-breakpoint}layout__item,
    > %#{$wgc-namespace}__#{$wgc-breakpoint}layout__item {
      display: inline-block;
      padding-left: 0;
      padding-right: $modifier-value;

      vertical-align: top;
      width: 100%;

      -webkit-box-sizing: border-box;
         -moz-box-sizing: border-box;
              box-sizing: border-box;
    }

    > .#{$wgc-namespace}__#{$wgc-breakpoint}layout__item--center,
    > %#{$wgc-namespace}__#{$wgc-breakpoint}layout__item--center {
      padding-left: $modifier-value / 2;
      padding-right: $modifier-value / 2;
    }
  }
}

@each $wgc-breakpoint in $wgc-breakpoints {
  $alias: nth($wgc-breakpoint, 1);

  @include wgc-media-query($alias) {
    @each $wgc-layout-size in $wgc-layout-sizes {
      $enabler: nth($wgc-layout-size, 1);

      @if ($enabler == true) {

        $modifier:       nth($wgc-layout-size, 2);
        $modifier-value: nth($wgc-layout-size, 3);

        @include wgc-layout-group($modifier, $modifier-value, $alias)
      }
    }

    @if ($wgc-enable-layout--center == true) {
      .#{$wgc-namespace}__#{$alias}layout--center,
      %#{$wgc-namespace}__#{$alias}layout--center {
        margin: 0 auto;
      }
    }
  }
}
